# フェーズ設計ガイドライン

## フェーズ分割の原則

1. **1つのフェーズ = 1つの関心事**: 型定義、コンポーネント、ストア、フックなど
2. **各フェーズで動作確認可能**: 途中でも既存機能が壊れていないことを確認
3. **依存関係を考慮した順序**: 型定義 → ストア → フック → コンポーネント → テスト
4. **並行可能なフェーズの明示**: 独立したタスクは並行実行可能と記載

## 典型的なフェーズ構成

| フェーズ | 内容 | 典型的なタスク |
|---------|------|---------------|
| Phase 0 | 準備 | 型定義追加、定数追加、環境準備 |
| Phase 1 | データ層 | ストア作成/変更、ユーティリティ追加 |
| Phase 2 | ロジック層 | カスタムフック作成/変更 |
| Phase 3 | UI層 | コンポーネント作成/変更 |
| Phase 4 | 統合 | 結合、動作確認、調整 |
| Phase 5 | 品質 | テスト追加、ドキュメント更新、クリーンアップ |

## 本プロジェクト固有の注意点

- **状態管理**: 新しい状態は適切なZustandストアに追加する（`src/stores/`）
- **型定義**: 型は `src/types/index.ts` に集約する
- **テスト**: `src/test/` にテストを追加し、`npm run test:run` で確認
- **コンポーネント**: `React.memo` による最適化を忘れずに
- **既存の `spec.md`**: プロジェクトの過去の実装計画は `spec.md` を参照

## 計画書レビューチェックリスト

作成した計画書について以下を確認する：

- [ ] 各フェーズが独立して動作確認可能か
- [ ] フェーズ間の依存関係が明確か
- [ ] 1フェーズの変更量が適切か（大きすぎないか）
- [ ] 既存機能を壊さない手順になっているか
- [ ] テスト計画が含まれているか
