# Test Quality Checklist

## 1. 診断チェック

- [ ] 既存テスト一覧を取得し、対象モジュールごとの観点を棚卸しした
- [ ] 直近の不具合に対して「検出できなかった理由」を明文化した
- [ ] 不具合が再現する最小条件（入力、順序、タイミング）を特定した
- [ ] 「正常系のみ」「固定値のみ」「同期前提のみ」の偏りがないか確認した

## 2. 追加すべき観点

- [ ] 境界値（0、最小、最大、終了直前、終了直後）
- [ ] 順序依存（A→B と B→A の差）
- [ ] 非同期状態（未ロード、読み込み中、タイムアウト、リトライ）
- [ ] 状態遷移（初期化、再生、停止、再開、エラー復帰）
- [ ] 実行環境差分（OS、ブラウザ、ランタイム、CI）で壊れやすい挙動

## 3. テスト追加方針

- [ ] まず失敗テストを作成し、再現を固定化した
- [ ] 複雑な分岐は純関数化してユニットテスト可能にした
- [ ] ストア更新や派生値（合計時間など）を期待値で明示した
- [ ] 既存仕様を壊さない回帰テストを追加した

## 4. 実行コマンド

```bash
# Example (npm)
npm run test
npm run lint
npm run build

# Example (pnpm)
pnpm test
pnpm lint
pnpm build
```

## 5. 完了条件

- [ ] 新規テストが、修正前に失敗し修正後に成功することを確認した
- [ ] `test + lint + build` が成功した
- [ ] 変更内容、追加観点、残課題を報告に記載した
